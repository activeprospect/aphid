<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="cache-control" content="no-cache" />
    <title>Aphid Test â€” Aphid.Core.Application</title>
    <link rel="stylesheet" href="../../../Build/Aphid.css" />
    <link rel="stylesheet" href="../../Tests.css" />
    <script src="../../../Build/Aphid.Combined.js"></script>
    <script src="../../../Vendor/script.aculo.us/src/unittest.js"></script>
  </head>
  <body class="testCase">

    <header>
      <h1>Aphid.Core.Application Tests</h1>
    </header>

    <!-- Test Case Description -->
    <section id="descriptionSection">
      <p>
        Tests the base Aphid application delegate for expected behavior,
        including setting up shared instances of the logger and loading
        indicator.
      </p>
    </section>

    <!-- Log Section -->
    <section id="logSection">
    </section>

    <!-- Tests -->
    <script>
      new Test.Unit.Runner({

        setup: function()
        {
          this.application = new Aphid.Core.Application();
        },

        testShouldInitializeSharedInstance: function() { with(this) {
          assert(Application.sharedInstance);
          assertInstanceOf(Aphid.Core.Application, Application.sharedInstance);
        }},

        testShouldSetAppDelegateGlobal: function() { with(this) {
          assert($AppDelegate);
          assertEqual(Application.sharedInstance, $AppDelegate);
        }},

        testShouldInitializeLogger: function() { with(this) {
          assert(this.application.logger);
          assertInstanceOf(Aphid.Support.Logger, this.application.logger);
        }},

        testShouldInitializeNotificationCenter: function() { with(this) {
          assert(this.application.notificationCenter);
          assertInstanceOf(Aphid.Core.NotificationCenter, this.application.notificationCenter);
        }},

        testShouldInitializeLoadingIndicator: function() { with(this) {
          assert(this.application.loadingIndicator);
          assertInstanceOf(Aphid.UI.LoadingIndicator, this.application.loadingIndicator);
        }}

      }, { testLog: "logSection" });
    </script>

  </body>
</html>
